# Роутинг и SPA в приложениях на React 19

## 1. Введение

## 2. Что такое SPA (Single Page Application)

**SPA** — это веб-приложение, которое загружает одну HTML-страницу и динамически обновляет контент без перезагрузки страницы.

### Ключевые особенности SPA

- Навигация без перезагрузки браузера
    
- Управление состоянием на клиенте
    
- Использование History API
    

### Преимущества SPA

- Быстрая навигация
    
- Улучшенный пользовательский опыт (UX)
    
- Меньшая нагрузка на сервер
    

### Недостатки SPA

- Сложности с SEO
    
- Более тяжёлый первый рендер
    

---

## 3. Роутинг в SPA

### Что такое роутинг

**Роутинг** — это механизм сопоставления URL-адреса с отображаемым компонентом интерфейса.

Пример:

- `/` → Главная страница
    
- `/login` → Страница входа
    
- `/profile` → Профиль пользователя
    

В SPA роутинг:

- Работает на стороне клиента
    
- Использует History API (`pushState`, `replaceState`)
    

---

## 4. Инструменты роутинга для React 19

### Основные решения

- **react-router-dom v6+** — стандарт де-факто для SPA
    
- Next.js — фреймворк с файловым роутингом (SSR/SSG)
    
- Remix — data-driven роутинг
    

В данной лекции используется **react-router-dom**.

---

## 5. Установка и базовая настройка

### Установка библиотеки

```bash
npm install react-router-dom
```

---

## 6. Инициализация BrowserRouter

### main.jsx

```jsx
import React from 'react'
import ReactDOM from 'react-dom/client'
import { BrowserRouter } from 'react-router-dom'
import App from './App'

ReactDOM.createRoot(document.getElementById('root')).render(
  <BrowserRouter>
    <App />
  </BrowserRouter>
)
```

`BrowserRouter` отвечает за синхронизацию URL и UI.

---

## 7. Объявление маршрутов

### App.jsx

```jsx
import { Routes, Route } from 'react-router-dom'
import Home from './pages/Home'
import About from './pages/About'
import NotFound from './pages/NotFound'

function App() {
  return (
    <Routes>
      <Route path="/" element={<Home />} />
      <Route path="/about" element={<About />} />
      <Route path="*" element={<NotFound />} />
    </Routes>
  )
}

export default App
```

### Ключевые моменты

- `Routes` — контейнер маршрутов
    
- `Route` — описание одного маршрута
    
- `*` — маршрут по умолчанию (404)
    

---

## 8. Навигация внутри приложения

### Компонент Link

```jsx
import { Link } from 'react-router-dom'

<Link to="/about">О нас</Link>
```

Использование `<a href>` запрещено — это ломает SPA.

---

### NavLink (активные ссылки)

```jsx
import { NavLink } from 'react-router-dom'

<NavLink
  to="/about"
  className={({ isActive }) => isActive ? 'active' : ''}
>
  О нас
</NavLink>
```

---

## 9. Динамические маршруты

### Пример URL

```
/products/15
```

### Описание маршрута

```jsx
<Route path="/products/:id" element={<Product />} />
```

### Получение параметров

```jsx
import { useParams } from 'react-router-dom'

function Product() {
  const { id } = useParams()
  return <h2>Товар #{id}</h2>
}
```

---

## 10. Вложенные маршруты

### Пример структуры

```
/profile
/profile/settings
```

### Роутинг

```jsx
<Route path="/profile" element={<Profile />}>
  <Route path="settings" element={<Settings />} />
</Route>
```

### Outlet

```jsx
import { Outlet } from 'react-router-dom'

function Profile() {
  return (
    <div>
      <h1>Профиль</h1>
      <Outlet />
    </div>
  )
}
```

---

## 11. Программная навигация

```jsx
import { useNavigate } from 'react-router-dom'

function Login() {
  const navigate = useNavigate()

  const handleLogin = () => {
    navigate('/profile')
  }

  return <button onClick={handleLogin}>Войти</button>
}
```

---

## 12. Защищённые маршруты

### PrivateRoute

```jsx
import { Navigate } from 'react-router-dom'

function PrivateRoute({ children }) {
  const isAuth = false
  return isAuth ? children : <Navigate to="/login" />
}
```

### Использование

```jsx
<Route
  path="/profile"
  element={
    <PrivateRoute>
      <Profile />
    </PrivateRoute>
  }
/>
```

---

## 13. Практическая часть

### Задание 1

Создать SPA на React 19 с маршрутами:

- `/` — Главная
    
- `/products` — Список товаров
    
- `/products/:id` — Страница товара
    
- `*` — 404
    

### Задание 2

- Добавить меню навигации
    
- Использовать `NavLink`
    

### Задание 3 ⭐

- Реализовать защищённый маршрут `/admin`
    

---

## 14. Итоги

- React 19 — библиотека для UI
    
- SPA — архитектурный подход
    
- Роутинг реализуется сторонними инструментами
    
- `react-router-dom` — стандарт для SPA
    
